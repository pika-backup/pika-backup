{
  "id": "org.gnome.World.PikaBackup.Devel",
  "command": "pika-backup",
  "runtime": "org.gnome.Platform",
  "runtime-version": "49",
  "sdk": "org.gnome.Sdk",
  "sdk-extensions": [
    "org.freedesktop.Sdk.Extension.rust-stable"
  ],
  "build-options": {
    "append-path": "/usr/lib/sdk/rust-stable/bin:/app/bin",
    "build-args": [
      "--share=network"
    ]
  },
  "finish-args": [
    "--filesystem=host",
    "--filesystem=/var:ro",
    "--filesystem=~/.var/app",
    "--filesystem=xdg-data/flatpak:ro",
    "--socket=wayland",
    "--share=ipc",
    "--socket=fallback-x11",
    "--share=network",
    "--socket=ssh-auth",
    "--talk-name=org.gtk.vfs.*",
    "--filesystem=xdg-run/gvfs",
    "--filesystem=xdg-run/gvfsd",
    "--system-talk-name=org.freedesktop.UPower",
    "--device=all",
    "--talk-name=org.freedesktop.Flatpak.*",
    "--filesystem=xdg-run/pika-backup:create",
    "--talk-name=org.gtk.MountOperationHandler",
    "--unset-env=LD_PRELOAD",
    "--unset-env=GTK_THEME",
    "--env=G_MESSAGES_DEBUG=all",
    "--env=RUST_BACKTRACE=1"
  ],
  "modules": [
    {
      "name": "libxxhash",
      "buildsystem": "cmake",
      "subdir": "cmake_unofficial",
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/Cyan4973/xxHash/archive/refs/tags/v0.8.3.tar.gz",
          "sha256": "aae608dfe8213dfd05d909a57718ef82f30722c392344583d3f39050c7f29a80",
          "x-checker-data": {
            "type": "git",
            "tag-pattern": "^v([\\d.]+)$"
          }
        }
      ],
      "config-opts": [
        "-DBUILD_SHARED_LIBS=ON",
        "-DCMAKE_BUILD_TYPE=Release"
      ]
    },
    {
      "name": "libfuse",
      "buildsystem": "meson",
      "config-opts": [
        "-Dexamples=false",
        "-Duseroot=false",
        "-Dtests=false",
        "-Dudevrulesdir=/tmp/",
        "-Dinitscriptdir="
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/libfuse/libfuse/releases/download/fuse-3.17.2/fuse-3.17.2.tar.gz",
          "sha256": "3d932431ad94e86179e5265cddde1d67aa3bb2fb09a5bd35c641f86f2b5ed06f",
          "x-checker-data": {
            "type": "anitya",
            "project-id": 861,
            "url-template": "https://github.com/libfuse/libfuse/releases/download/fuse-$version/fuse-$version.tar.gz",
            "versions": {
              "<": "4.0"
            }
          }
        }
      ]
    },
    {
      "name": "host-command-wrapper",
      "buildsystem": "simple",
      "build-commands": [
        "install fusermount-wrapper.sh /app/bin/fusermount",
        "install fusermount-wrapper.sh /app/bin/fusermount3",
        "install umount-wrapper.sh /app/bin/umount"
      ],
      "sources": [
        {
          "type": "file",
          "path": "fusermount-wrapper.sh"
        },
        {
          "type": "file",
          "path": "umount-wrapper.sh"
        }
      ]
    },
    "python3-setuptools-scm.json",
    "python3-flit.json",
    "python3-tomli.json",
    "python3-pkgconfig.json",
    "python3-pyfuse3.json",
    "python3-borgbackup.json",
    {
      "name": "pika-backup",
      "buildsystem": "meson",
      "config-opts": [
        "-Dprofile=dev",
        "-Dapp_id_suffix=.Devel"
      ],
      "sources": [
        {
          "type": "dir",
          "path": ".."
        }
      ]
    }
  ],
  "desktop-file-name-suffix": " ðŸš§"
}
